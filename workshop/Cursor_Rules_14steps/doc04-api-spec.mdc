---
description:
globs:
alwaysApply: false
---

# API 명세서 작성 가이드라인

## 목적

이 문서는 프로젝트 내에서 API 명세서를 작성할 때 사용할 수 있는 기준과 표준화된 포맷을 제공합니다.  
일관성 있는 API 명세서는 개발팀 간의 커뮤니케이션을 원활하게 하고, 구현 품질을 높이며, 유지보수도 용이하게 만듭니다.

## API 명세서 기본 구성

API 명세서는 다음 항목을 포함해야 합니다:

1. **API 개요**
   - API의 목적과 기능
   - 대상 사용자
   - 사용 기술 스택
   - 버전 정보

2. **엔드포인트 목록**
   - 전체 API 목록을 요약한 테이블
   - (필요 시) 기능별 분류

3. **인증 및 권한**
   - 인증 방식 상세 설명 (OAuth, API 키, JWT 등)
   - 권한 수준 및 스코프 정의
   - 인증 실패 시 에러 처리 방법

4. **엔드포인트 상세**
   - 각 엔드포인트의 상세 명세
   - 요청/응답 예시 포함

5. **데이터 모델**
   - 주요 데이터 구조 정의
   - 데이터 타입 및 제약 조건 명시

6. **에러 핸들링**
   - 에러 코드 및 설명
   - 에러 응답 형식 정의

7. **요청 제한 (Rate Limit)**
   - API 사용 제한 조건
   - 제한 초과 시 처리 방식

8. **변경 이력**
   - API 사양 변경 내역
   - Breaking Changes(호환성 깨짐)에 대한 명확한 표기

## 엔드포인트 상세 명세 포맷

각 엔드포인트는 다음 형식으로 작성합니다:

```markdown
### 엔드포인트: {HTTP 메서드} {경로}

#### 개요
{엔드포인트의 간단한 설명}

#### URL파라미터
| 파라미터명 | 타입 | 필수여부 | 설명 |
|------------|------|--------|------------|
| {이름} | {유형} | Yes/No | {설명} |

#### 쿼리파라미터
| 파라미터명 | 타입 | 필수여부 | 기본값 | 설명 |
|------------|------|--------|---------|------------|
| {이름} | {유형} | Yes/No | {기본값} | {설명} |

#### 요청 헤더 
| 헤더명 | 필수여부 | 설명 |
|-----------|--------|------------|
| {이름} | Yes/No | {설명} |

#### 요청 본문 (Request Body)
```json
{
  "property1": "value1",
  "property2": "value2"
}
```

| 속성 | 타입 | 필수여부 | 설명 |
|------------|------|--------|------------|
| {이름} | {유형} | Yes/No | {설명} |

#### 응답
##### 성공응답: {HTTP상태코드}
```json
{
  "property1": "value1",
  "property2": "value2"
}
```

| 속성 | 타입 | 설명 |
|------------|------|------------|
| {이름} | {유형} | {설명} |

##### 에러 응답: {HTTP 상태 코드}
```json
{
  "error": "error_code",
  "message": "에러메시지",
  "details": {}
}
```

#### 주의사항
- {구현시 주의할 점}
- {제약 조건 등}

#### 사용예시 
```bash
curl -X POST https://api.example.com/endpoint \
  -H "Content-Type: application/json" \
  -H "Authorization: Bearer token" \
  -d '{"property": "value"}'
```
```

## API 명세 작성 규칙

### 1. 명확성과 간결함

- 각 엔드포인트의 목적은 명확하게 서술
- 설명은 간결하게, 기술 용어는 처음 등장할 때 정의
- 예시는 실용적이고 이해하기 쉬운 형태로 제공

### 2. 일관성

- 파라미터 및 필드 명명 규칙(snake_case 또는 camelCase)은 프로젝트 내에서 통일
- HTTP 상태 코드는 RESTful 표준에 따라 사용
- 데이터 타입 표기 방식은 명확하고 일관되게 유지

### 3. 완전성

- 모든 입력 파라미터 및 응답 데이터 필드를 빠짐없이 작성
- 길이 제한, 허용 범위 등 제약 조건을 명시
- 에러 상황과 그에 대한 대응 방법을 문서화

### 4. 정확성

- 실제 구현과 일치해야 하며, 변경 시 즉시 문서를 반영
- 변경 이력 기록을 통해 추적 가능해야 함
- 문서 작성 후 반드시 리뷰 과정을 거쳐 오류를 방지

## API 문서 작성 포맷

### OpenAPI (Swagger) 형식

다음과 같은 기준으로 OpenAPI(Swagger) 명세를 사용하는 것을 권장합니다:

1. OpenAPI 3.0 이상 버전 사용
2. YAML 또는 JSON 형식 사용 (YAML 권장)
3. 컴포넌트 재사용 (components/schemas 등)
4. 문서 자동 생성 도구와 연동 가능한 구조 유지

예시:
```yaml
openapi: 3.0.0
info:
  title: 샘플API
  version: 1.0.0
  description: API설명
paths:
  /resource:
    get:
      summary: 리소스 조회
      description: 리소스 목록을 반환합니다
      parameters:
        # 파라미터 정의
      responses:
        '200':
          description: 성공 응답
          content:
            application/json:
              schema:
                # 스키마 정의
```

## RESTful 설계 원칙

API는 다음의 RESTful 원칙을 따르도록 합니다:

1. **리소스 지향 URI**
   - URI는 동사가 아닌 명사로 구성
   - 예시: `/users` (권장) vs `/getUsers` (지양)

2. **HTTP 메서드의 의미에 맞는 사용**
   - GET: 리소스 검색(읽기 전용)
   - POST: 새 리소스 만들기
   - PUT: 리소스의 완전한 대체
   - PATCH: 리소스의 일부 업데이트
   - DELETE: 리소스 삭제

3. **HTTP 상태 코드의 적절한 사용**
   - 2xx: 성공
   - 3xx: 리디렉션
   - 4xx: 클라이언트 오류
   - 5xx: 서버 오류

4. **버전 관리**
   - API에 버전 포함(URL 경로, 헤더, 쿼리 파라미터 중 하나)
   - 예시: `/api/v1/resources`

## API 명세 관리 프로세스

### 1. 작성 단계

1. 요구사항 정의 시점에 API 명세 초안을 작성
2. 설계 리뷰 후 피드백 반영
3. 개발자 간 합의 완료
4. 최종 명세서는 저장소에 보관

### 2. 수정 프로세스

1. API 변경이 필요한 경우, 우선 사양서의 갱신을 제안
2. 검토 및 승인 프로세스를 거침
3. 승인 후, 구현과 사양서의 갱신을 동시에 실시함
4. 버전 관리를 적절하게 수행하고 변경 내역 기록

### 3. 공개 프로세스

1. 내부 개발자용 문서로 항상 액세스 가능하게 만들기
2. 외부 파트너에 필요한 부분만 게시하는 경우 게시용 발췌판 만들기
3. 자동 생성된 문서 사이트 활용(Swagger UI, Redoc 등)

## 도구 및 템플릿

### 권장 도구

- **Swagger/OpenAPI Editor**: API 사양 생성 및 검증
- **Postman**: API 테스트 및 간편한 문서 작성
- **Swagger UI**: 대화형 API 문서 보기
- **Redoc**: 아름답고 읽기 쉬운 API 문서 생성

### 표준 템플릿

프로젝트의 `docs/api` 디렉토리에 표준 템플릿을 넣습니다.:

- `template.yaml` - OpenAPI 기반 템플릿
- `examples/` - 각종 요청/응답 예시 JSON 모음

## 맺음말 

이 가이드라인은 API 명세의 품질 향상과 표준화를 위한 문서입니다.
프로젝트의 발전에 따라 새로운 베스트 프랙티스와 팀의 피드백을 반영하여 지속적으로 개선해 나갈 예정입니다.

API 명세서는 단순한 문서가 아니라, 고품질 API 설계 및 구현을 위한 핵심 기반입니다.
이 기준을 통해 팀 전체의 생산성과 결과물의 품질 향상을 함께 실현해 나가길 기대합니다.